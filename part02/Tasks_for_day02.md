# Day 02 - Piscine SQL

## _Глубокое погружение в JOINs(объединения) в SQL_

Резюме: Сегодня вы увидите, как получить необходимые данные на основе различных структур.

## Exercise 00 - Move to the LEFT, move to the RIGHT

| Exercise 00: Move to the LEFT, move to the RIGHT |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex00                                                                                                                     |
| Files to turn-in                      | `day02_ex00.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |
| **Denied**                               |                                                                                                                          |
| SQL Syntax Construction                        | `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`                                                                                              |

Пожалуйста, напишите SQL-запрос, который возвращает список названий пиццерий с соответствующим рейтингом, которые не посещались посетителями.  

## Exercise 01 - Find data gaps

| Exercise 01: Find data gaps|                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex01                                                                                                                     |
| Files to turn-in                      | `day02_ex01.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |
| SQL Syntax Construction                        | `generate_series(...)`                                                                                              |
| **Denied**                               |                                                                                                                          |
| SQL Syntax Construction                        | `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`                                                                                              |

Пожалуйста, напишите SQL-запрос, который вернет пропущенные дни с 1 по 10 января 2022 года (включая все дни) для посещений лиц с идентификаторами 1 или 2 (это означает, что дни были пропущены обоими). Пожалуйста, упорядочьте количество дней посещения в порядке возрастания. Ниже представлен пример данных с названием столбца.

| missing_date |
| ------ |
| 2022-01-03 |
| 2022-01-04 |
| 2022-01-05 |
| ... |

## Exercise 02 - FULL means ‘completely filled’

| Exercise 02: FULL means ‘completely filled’|                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex02                                                                                                                     |
| Files to turn-in                      | `day02_ex02.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |
| **Denied**                               |                                                                                                                          |
| SQL Syntax Construction                        | `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`                                                                                              |

Пожалуйста, напишите SQL-запрос, который возвращает полный список имен людей, посетивших (или непосещенных) пиццерии в период с 1 по 3 января 2022 года, с одной стороны, и полный список названий пиццерий, которые были посещены (или не были посещены), с другой стороны. Пример данных с нужными названиями столбцов представлен ниже. Пожалуйста, обратите внимание на замену значений `NULL` на ‘-’ в столбцах `person_name` и `pizzeria_name`. Пожалуйста, также добавьте порядок оформления заказа для всех 3 столбцов.

| person_name | visit_date | pizzeria_name |
| ------ | ------ | ------ |
| - | null | DinoPizza |
| - | null | DoDo Pizza |
| Andrey | 2022-01-01 | Dominos |
| Andrey | 2022-01-02 | Pizza Hut |
| Anna | 2022-01-01 | Pizza Hut |
| Denis | null | - |
| Dmitriy | null | - |
| ... | ... | ... |

## Exercise 03 - Reformat to CTE

| Exercise 03: Reformat to CTE |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex03                                                                                                                     |
| Files to turn-in                      | `day02_ex03.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |
| SQL Syntax Construction                        | `generate_series(...)`                                                                                              |
| **Denied**                               |                                                                                                                          |
| SQL Syntax Construction                        | `NOT IN`, `IN`, `NOT EXISTS`, `EXISTS`, `UNION`, `EXCEPT`, `INTERSECT`                                                                                              |

Давайте вернемся к упражнению № 01, пожалуйста, перепишите свой SQL, используя шаблон CTE (Common Table Expression). Пожалуйста, перейдите к части CTE вашего "генератора дня". Результат должен быть таким же, как в упражнении №01

| missing_date | 
| ------ | 
| 2022-01-03 | 
| 2022-01-04 | 
| 2022-01-05 | 
| ... |

## Exercise 04 - Find favourite pizzas


| Exercise 04: Find favourite pizzas |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex04                                                                                                                     |
| Files to turn-in                      | `day02_ex04.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |

Найдите полную информацию о всех возможных названиях пиццерий и ценах, в которых можно заказать пиццу с грибами или пепперони. Пожалуйста, отсортируйте результат по названию пиццы и пиццерии. Ниже приведен пример данных (пожалуйста, используйте те же названия столбцов в вашем SQL-запросе).

| pizza_name | pizzeria_name | price |
| ------ | ------ | ------ |
| mushroom pizza | Dominos | 1100 |
| mushroom pizza | Papa Johns | 950 |
| pepperoni pizza | Best Pizza | 800 |
| ... | ... | ... |

## Exercise 05 - Investigate Person Data


| Exercise 05: Investigate Person Data |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex05                                                                                                                     |
| Files to turn-in                      | `day02_ex05.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |

Найдите имена всех женщин старше 25 лет и упорядочьте результат по именам. Пример выходных данных представлен ниже.

| name | 
| ------ | 
| Elvira | 
| ... |


## Exercise 06 - favourite pizzas for Denis and Anna


| Exercise 06: favourite pizzas for Denis and Anna |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex06                                                                                                                     |
| Files to turn-in                      | `day02_ex06.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |

Пожалуйста, найдите названия всех пицц (и соответствующих пиццерий, используя таблицу `menu`), которые заказывали Денис или Анна. Отсортируйте результат по обоим столбцам. Пример выходных данных представлен ниже.

| pizza_name | pizzeria_name |
| ------ | ------ |
| cheese pizza | Best Pizza |
| cheese pizza | Pizza Hut |
| ... | ... |


## Exercise 07 - Cheapest pizzeria for Dmitriy


| Exercise 07: Cheapest pizzeria for Dmitriy |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex07                                                                                                                     |
| Files to turn-in                      | `day02_ex07.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |

Пожалуйста, найдите название пиццерии, которую Дмитрий посетил 8 января 2022 года и где можно было отведать пиццу менее чем за 800 рублей.


## Exercise 08 - Continuing to research data


| Exercise 08: Continuing to research data |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex08                                                                                                                     |
| Files to turn-in                      | `day02_ex08.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |           


Пожалуйста, найдите имена всех мужчин из Москвы или Самары, которые заказывают пиццу с пепперони или пиццу с грибами (или и то, и другое). Пожалуйста, упорядочьте результат по именам в порядке убывания. Пример результатов представлен ниже.

| name | 
| ------ | 
| Dmitriy | 
| ... |


## Exercise 09 - Who loves cheese and pepperoni?


| Exercise 09: Who loves cheese and pepperoni? |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex09                                                                                                                     |
| Files to turn-in                      | `day02_ex09.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |

Пожалуйста, найдите имена всех женщин, которые заказывали пиццу с пепперони и сыром (в любое время и в любых пиццериях). Убедитесь, что результат заказан по имени. Ниже представлена выборка данных.

| name | 
| ------ | 
| Anna | 
| ... |


## Exercise 10 - Find persons from one city


| Exercise 10: Find persons from one city |                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Turn-in directory                     | ex10                                                                                                                     |
| Files to turn-in                      | `day02_ex10.sql`                                                                                 |
| **Allowed**                               |                                                                                                                          |
| Language                        | ANSI SQL                                                                                              |

Пожалуйста, найдите имена людей, проживающих по одному и тому же адресу. Убедитесь, что результат упорядочен по имени 1-го человека, имени 2-го человека и общему адресу. Пример данных представлен ниже. Пожалуйста, убедитесь, что названия ваших столбцов соответствуют названиям столбцов ниже.

| person_name1 | person_name2 | common_address | 
| ------ | ------ | ------ |
| Andrey | Anna | Moscow |
| Denis | Kate | Kazan |
| Elvira | Denis | Kazan |
| ... | ... | ... |

[Вернуться в README.md](../README.md)